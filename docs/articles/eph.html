<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ejemplo de uso del paquete `eph` • eph</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Ejemplo de uso del paquete `eph`">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-122515754-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-122515754-3');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eph</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/eph.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/holatam/eph">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Ejemplo de uso del paquete <code>eph</code>
</h1>
                        <h4 class="author">Germán Rosati</h4>
                        <h4 class="author">Diego Koslowski</h4>
                        <h4 class="author">Pablo Tiscornia</h4>
                        <h4 class="author">Guido Weksler</h4>
                        <h4 class="author">Natsumi Shokida</h4>
            
            <h4 class="date">2019-11-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/holatam/eph/blob/master/vignettes/eph.Rmd"><code>vignettes/eph.Rmd</code></a></small>
      <div class="hidden name"><code>eph.Rmd</code></div>

    </div>

    
    
<p>El paquete <code>eph</code> tiene como objetivo facilitar el trabajo de les usuaries que trabajen con los microdatos de la Encuesta Permanente de Hogares. Este tutorial busca ejemplificar un pipeline de trabajo más o menos típico para mostrar el uso de las funciones del paquete.</p>
<div id="instalación" class="section level2">
<h2 class="hasAnchor">
<a href="#instalaci%C3%B3n" class="anchor"></a>Instalación</h2>
<p>Para instalar la versión estable del paquete usar:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">'eph'</span>)</code></pre></div>
<p>Para la versión en desarrollo:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages('devtools') si no tiene instalado devtools</span>

devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/reexports.html">install_github</a></span>(<span class="st">"holatam/eph"</span>)</code></pre></div>
</div>
<div id="ejemplo-de-flujo-de-trabajo" class="section level2">
<h2 class="hasAnchor">
<a href="#ejemplo-de-flujo-de-trabajo" class="anchor"></a>Ejemplo de flujo de trabajo</h2>
<div id="descarga-de-datos-get_microdata" class="section level3">
<h3 class="hasAnchor">
<a href="#descarga-de-datos-get_microdata" class="anchor"></a>Descarga de datos: <code>get_microdata()</code>
</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(eph)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyverse)
<span class="co">#&gt; -- Attaching packages ------------------------------------- tidyverse 1.2.1 --</span>
<span class="co">#&gt; v ggplot2 3.1.0     v purrr   0.3.3</span>
<span class="co">#&gt; v tibble  2.1.3     v dplyr   0.8.3</span>
<span class="co">#&gt; v tidyr   1.0.0     v stringr 1.4.0</span>
<span class="co">#&gt; v readr   1.3.1     v forcats 0.4.0</span>
<span class="co">#&gt; -- Conflicts ---------------------------------------- tidyverse_conflicts() --</span>
<span class="co">#&gt; x dplyr::filter() masks stats::filter()</span>
<span class="co">#&gt; x dplyr::lag()    masks stats::lag()</span></code></pre></div>
<p>Obtengamos la base de microdatos de individuos para el tercer trimestre de 2018:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ind_3_<span class="dv">18</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_microdata.html">get_microdata</a></span>(<span class="dt">year=</span><span class="dv">2018</span>, <span class="dt">trimester=</span><span class="dv">2</span>, <span class="dt">type=</span><span class="st">'individual'</span>)</code></pre></div>
<p>Puede verse que la función requiere tres argumentos básicos:</p>
<ul>
<li>
<code>year</code>: entero con el año de la encuesta que se desea descargar</li>
<li>
<code>trimester</code>: entero con el trimestre (este argumento es válido para la EPH continua, 2004-actualidad)</li>
<li>
<code>type</code>: character <code>"individual"</code>, para descargar la base de invidividuos y <code>"hogar"</code>, para la de hogar.</li>
</ul>
<p>Si se deseara descargar una base de la EPH puntual, será necesario reemplazar el argumento <code>trimester</code> por <code>wave</code> que define la onda de la EPH puntual que se desea descargar. Por ejemplo, si se buscara descargar la base individual de la segunda onda del año 2002, debería escribirse</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ind_2_<span class="dv">02</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_microdata.html">get_microdata</a></span>(<span class="dt">year=</span><span class="dv">2001</span>, <span class="dt">wave=</span><span class="dv">2</span>, <span class="dt">type=</span><span class="st">'individual'</span>)</code></pre></div>
</div>
<div id="etiquetado-organize_labels" class="section level3">
<h3 class="hasAnchor">
<a href="#etiquetado-organize_labels" class="anchor"></a>Etiquetado: <code>organize_labels()</code>
</h3>
<p>Es posible etiquetar de forma automática el dataset llamando a la función <code><a href="../reference/organize_labels.html">organize_labels()</a></code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ind_3_<span class="dv">18</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/organize_labels.html">organize_labels</a></span>(<span class="dt">df=</span>ind_3_<span class="dv">18</span>, <span class="dt">type=</span><span class="st">'individual'</span>)</code></pre></div>
<p>La función toma dos argumentos:</p>
<ul>
<li>
<code>df</code>: el data.frame que se quiere etiquetar, debe ser producto de <code><a href="../reference/get_microdata.html">get_microdata()</a></code>
</li>
<li>
<code>type</code>: string; cuál es el tipo de datatset que se quiere etiquetar, <code>"individual"</code> o <code>"hogar"</code>
</li>
</ul>
<p>Descarguemos y etiquetemos la base de hogares del 3 trimestre de 2018. Podemos hacer uso de los <code><a href="../reference/pipe.html">%&gt;%</a></code> pipes de <code>magritte</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hog_3_<span class="dv">18</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_microdata.html">get_microdata</a></span>(<span class="dt">year=</span><span class="dv">2018</span>, <span class="dt">trimester=</span><span class="dv">3</span>, <span class="dt">type=</span><span class="st">'hogar'</span>) <span class="op">%&gt;%</span>
<span class="st">              </span><span class="kw"><a href="../reference/organize_labels.html">organize_labels</a></span>(., <span class="dt">type=</span><span class="st">'hogar'</span>)</code></pre></div>
</div>
<div id="tabulados-ponderados-calculate_tabulates" class="section level3">
<h3 class="hasAnchor">
<a href="#tabulados-ponderados-calculate_tabulates" class="anchor"></a>Tabulados ponderados: <code>calculate_tabulates()</code>
</h3>
<p>Uno de los problemas habituales en el trabajo con la EPH es la dificultad de los diferentes softwares comerciales para la construcción de tablas de contigencia y/o distribuciones de frecuencia ponderadas. El paquete lo resuelve mediante la función <code><a href="../reference/calculate_tabulates.html">calculate_tabulates()</a></code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/calculate_tabulates.html">calculate_tabulates</a></span>(<span class="dt">base=</span>ind_3_<span class="dv">18</span>, <span class="dt">x=</span><span class="st">'ESTADO'</span>, <span class="dt">y=</span><span class="st">'CH04'</span>, <span class="dt">weights =</span> <span class="st">'PONDIH'</span>,
                    <span class="dt">add.totals=</span><span class="st">'row'</span>, <span class="dt">add.percentage=</span><span class="st">'col'</span>)
<span class="co">#&gt;                                                                   ESTADO/CH04</span>
<span class="co">#&gt;  Entrevista individual no realizada (no respuesta al cuestionario individual)</span>
<span class="co">#&gt;                                                                       Ocupado</span>
<span class="co">#&gt;                                                                    Desocupado</span>
<span class="co">#&gt;                                                                      Inactivo</span>
<span class="co">#&gt;                                                            Menor de 10 anios.</span>
<span class="co">#&gt;                                                                         Total</span>
<span class="co">#&gt;   Varon  Mujer</span>
<span class="co">#&gt;    0.0%   0.0%</span>
<span class="co">#&gt;   49.0%  35.4%</span>
<span class="co">#&gt;    4.7%   4.3%</span>
<span class="co">#&gt;   30.3%  46.7%</span>
<span class="co">#&gt;   16.0%  13.6%</span>
<span class="co">#&gt;  100.0% 100.0%</span></code></pre></div>
<p>Los argumentos principales de la función son:</p>
<ul>
<li>
<code>base</code>: un data.frame proveniente de <code><a href="../reference/get_microdata.html">get_microdata()</a></code>
</li>
<li>
<code>x</code>: string con el nombre de la variable a tabular</li>
<li>
<code>y</code>: otro string (opcional) con el nombre de una segunda variable, para una tabla de doble entrada. Tiene que ser de igual largo que <code>x</code>
</li>
<li>
<code>weights</code>: string con el nombre de la variable que contiene los pesos</li>
<li>
<code>add.totals</code>: agrega valores por <code>row</code>, <code>col</code> o <code>both</code>
</li>
<li>
<code>add.percentage</code>: calcula porcentajes por <code>row</code>, <code>col</code> o <code>both</code>
</li>
</ul>
<p>Así, si quisiéramos la misma tabla sin ponderar:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/calculate_tabulates.html">calculate_tabulates</a></span>(<span class="dt">base=</span>ind_3_<span class="dv">18</span>, <span class="dt">x=</span><span class="st">'ESTADO'</span>, <span class="dt">y=</span><span class="st">'CH04'</span>,
                    <span class="dt">add.totals=</span><span class="st">'row'</span>, <span class="dt">add.percentage=</span><span class="st">'col'</span>)
<span class="co">#&gt;                                                                   ESTADO/CH04</span>
<span class="co">#&gt;  Entrevista individual no realizada (no respuesta al cuestionario individual)</span>
<span class="co">#&gt;                                                                       Ocupado</span>
<span class="co">#&gt;                                                                    Desocupado</span>
<span class="co">#&gt;                                                                      Inactivo</span>
<span class="co">#&gt;                                                            Menor de 10 anios.</span>
<span class="co">#&gt;                                                                         Total</span>
<span class="co">#&gt;   Varon  Mujer</span>
<span class="co">#&gt;    0.1%   0.1%</span>
<span class="co">#&gt;   48.5%  34.0%</span>
<span class="co">#&gt;    3.6%   3.3%</span>
<span class="co">#&gt;   32.0%  48.8%</span>
<span class="co">#&gt;   15.9%  13.8%</span>
<span class="co">#&gt;  100.0% 100.0%</span></code></pre></div>
</div>
<div id="armando-pools-de-datos-organize_panels" class="section level3">
<h3 class="hasAnchor">
<a href="#armando-pools-de-datos-organize_panels" class="anchor"></a>Armando pools de datos: <code>organize_panels()</code>
</h3>
<p>Otra práctica común y necesaria en el trabajo con microdatos de la EPH es la generación de paneles de datos, es decir, el seguimiento de los registros a lo largo de las diferentes bases de la encuesta. Esto puede generarse en <code>eph</code> con la función <code><a href="../reference/organize_panels.html">organize_panels()</a></code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bases &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">i_2018_1=</span><span class="kw"><a href="../reference/get_microdata.html">get_microdata</a></span>(<span class="dt">year=</span><span class="dv">2018</span>, <span class="dt">trimester=</span><span class="dv">1</span>, <span class="dt">type=</span><span class="st">'individual'</span>),
              <span class="dt">i_2018_2=</span><span class="kw"><a href="../reference/get_microdata.html">get_microdata</a></span>(<span class="dt">year=</span><span class="dv">2018</span>, <span class="dt">trimester=</span><span class="dv">2</span>, <span class="dt">type=</span><span class="st">'individual'</span>),
              <span class="dt">i_2018_3=</span><span class="kw"><a href="../reference/get_microdata.html">get_microdata</a></span>(<span class="dt">year=</span><span class="dv">2018</span>, <span class="dt">trimester=</span><span class="dv">3</span>, <span class="dt">type=</span><span class="st">'individual'</span>),
              <span class="dt">i_2018_4=</span><span class="kw"><a href="../reference/get_microdata.html">get_microdata</a></span>(<span class="dt">year=</span><span class="dv">2018</span>, <span class="dt">trimester=</span><span class="dv">4</span>, <span class="dt">type=</span><span class="st">'individual'</span>)
)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pool &lt;-<span class="st"> </span><span class="kw"><a href="../reference/organize_panels.html">organize_panels</a></span>(<span class="dt">bases=</span>bases, <span class="dt">variables=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'ESTADO'</span>),
                        <span class="dt">window=</span><span class="st">'anual'</span>)
<span class="co">#&gt; Warning in bind_rows_(x, .id): Unequal factor levels: coercing to character</span>
<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>

<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>
<span class="co">#&gt; Warning in bind_rows_(x, .id): Unequal factor levels: coercing to character</span>
<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>

<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>
<span class="co">#&gt; Warning in bind_rows_(x, .id): Unequal factor levels: coercing to character</span>
<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>

<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>
<span class="co">#&gt; Warning in bind_rows_(x, .id): Unequal factor levels: coercing to character</span>
<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>

<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>

<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>

<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>

<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>

<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>

<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>

<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>

<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>

<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>
<span class="co">#&gt; Joining, by = c("CODUSU", "NRO_HOGAR", "COMPONENTE", "Id_Trimestre")</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pool
<span class="co">#&gt; # A tibble: 0 x 17</span>
<span class="co">#&gt; # ... with 17 variables: CODUSU &lt;chr&gt;, NRO_HOGAR &lt;int&gt;, COMPONENTE &lt;int&gt;,</span>
<span class="co">#&gt; #   ANO4 &lt;int&gt;, TRIMESTRE &lt;int&gt;, CH04 &lt;int&gt;, CH06 &lt;int&gt;, ESTADO &lt;int&gt;,</span>
<span class="co">#&gt; #   Trimestre &lt;chr&gt;, Id_Trimestre &lt;dbl&gt;, ANO4_t1 &lt;int&gt;,</span>
<span class="co">#&gt; #   TRIMESTRE_t1 &lt;int&gt;, CH04_t1 &lt;int&gt;, CH06_t1 &lt;int&gt;, ESTADO_t1 &lt;int&gt;,</span>
<span class="co">#&gt; #   Trimestre_t1 &lt;chr&gt;, consistencia &lt;lgl&gt;</span></code></pre></div>
<p>La función nos devuelve un data.frame en el cual cada fila es un registro y se agregan variables en formato <code>long</code> de las variables de interés. Lo que hace detrás de bambalinas es concatenar todas las bases espeficadas en el argumento <code>list=</code> y hacer un join, extrayendo aquellos registros que aparecen medidos en las diferentes bases. La columna <code>consistencia</code> evalúa si en cada observación cambia el sexo o la edad de la persona durante en las dos ondas previas o posteriores.</p>
<p>Es sencillo formatear este dataset en formato <code>tidy</code>:</p>
<p>CHEQUEAR ESTO….</p>
</div>
<div id="generando-una-serie-de-asalariazación" class="section level3">
<h3 class="hasAnchor">
<a href="#generando-una-serie-de-asalariazaci%C3%B3n" class="anchor"></a>Generando una serie de asalariazación</h3>
<p>Veamos ahora un ejemplo un poco más complejo. Queremos generar una serie completa acerca del peso de los TCP sobre los ocupados. Para ello, tenemos que iterar sobre los años y trimestres que querramos incluir en el cálculo y, para cada año-trimestre calcular la razón ponderada de los TPC sobre total de ocupados:</p>
<p><span class="math inline">\(SO_{t} = \frac{\sum_{i=1}^n w_{i}TCP_{i}}{\sum_{i=1}^n w_{i}OCUP_{i}}\)</span></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">year &lt;-<span class="st"> </span><span class="dv">2004</span><span class="op">:</span><span class="dv">2018</span>
trimester &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span>
wave&lt;-<span class="ot">NA</span>
type&lt;-<span class="st">'individual'</span>

df &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(<span class="kw"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span>(year, trimester, wave, type))
<span class="kw"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(df)&lt;-<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'year'</span>,<span class="st">'trimester'</span>,<span class="st">'wave'</span>, <span class="st">'type'</span>)

get_data &lt;-<span class="st"> </span><span class="cf">function</span>(year, trimester, <span class="dt">wave=</span><span class="ot">NA</span>, type){
  indicator&lt;-<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>()  
  d &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_microdata.html">get_microdata</a></span>(<span class="dt">year=</span>year, 
                     <span class="dt">trimester=</span>trimester, 
                     <span class="dt">type=</span>type, 
                     <span class="dt">wave=</span>wave)

  indicator<span class="op">$</span>year&lt;-year
  indicator<span class="op">$</span>trimester&lt;-trimester

  <span class="cf">if</span> (<span class="kw"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(d) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){ 
    indicator<span class="op">$</span>indic&lt;-<span class="ot">NA</span>
  }
                
  <span class="cf">if</span> (year<span class="op">==</span><span class="dv">2007</span> <span class="op">&amp;</span><span class="st"> </span>(trimester <span class="op">==</span><span class="dv">2</span> <span class="op">|</span><span class="st"> </span>trimester <span class="op">==</span><span class="st"> </span><span class="dv">4</span>)) {
    indicator<span class="op">$</span>ind&lt;-<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(d[d<span class="op">$</span>cat_ocup<span class="op">==</span><span class="dv">2</span>,]<span class="op">$</span>pondera, <span class="dt">na.rm=</span><span class="ot">TRUE</span>) <span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(d[d<span class="op">$</span>estado<span class="op">==</span><span class="dv">1</span>,]<span class="op">$</span>pondera, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)
  }
                
  <span class="cf">else</span> {
    indicator<span class="op">$</span>ind&lt;-<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(d[d<span class="op">$</span>CAT_OCUP<span class="op">==</span><span class="dv">2</span>,]<span class="op">$</span>PONDERA, <span class="dt">na.rm=</span><span class="ot">TRUE</span>) <span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(d[d<span class="op">$</span>ESTADO<span class="op">==</span><span class="dv">1</span>,]<span class="op">$</span>PONDERA, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)
  }
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(indicator)
}

df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">microdata=</span>
      purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map2.html">pmap</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">'year'</span> =<span class="st"> </span>year,
                       <span class="st">'trimester'</span> =<span class="st"> </span>trimester,
                       <span class="st">'wave'</span> =<span class="st"> </span>wave,
                       <span class="st">'type'</span> =<span class="st"> </span>type),
                  <span class="dt">.f =</span> get_data) 
                  )


df
<span class="co">#&gt; # A tibble: 60 x 5</span>
<span class="co">#&gt;     year trimester wave  type       microdata       </span>
<span class="co">#&gt;    &lt;int&gt;     &lt;int&gt; &lt;lgl&gt; &lt;fct&gt;      &lt;list&gt;          </span>
<span class="co">#&gt;  1  2004         1 NA    individual &lt;named list [3]&gt;</span>
<span class="co">#&gt;  2  2005         1 NA    individual &lt;named list [3]&gt;</span>
<span class="co">#&gt;  3  2006         1 NA    individual &lt;named list [3]&gt;</span>
<span class="co">#&gt;  4  2007         1 NA    individual &lt;named list [3]&gt;</span>
<span class="co">#&gt;  5  2008         1 NA    individual &lt;named list [3]&gt;</span>
<span class="co">#&gt;  6  2009         1 NA    individual &lt;named list [3]&gt;</span>
<span class="co">#&gt;  7  2010         1 NA    individual &lt;named list [3]&gt;</span>
<span class="co">#&gt;  8  2011         1 NA    individual &lt;named list [3]&gt;</span>
<span class="co">#&gt;  9  2012         1 NA    individual &lt;named list [3]&gt;</span>
<span class="co">#&gt; 10  2013         1 NA    individual &lt;named list [3]&gt;</span>
<span class="co">#&gt; # ... with 50 more rows</span></code></pre></div>
<p>Esto nos devuelve una tibble que contiene los indicadores de año, trimestre y tipo de dataset. A su vez, el campo <code>microdata</code> contiene nuestros indicadores. Solamente, tenemos que iterar sobre cada fila con <code>map()</code> y pegarlos uno debajo de otro con <code>bind_rows()</code>. Luego, emprolijamos un poco el dataset y lo ploteamos.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(microdata) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">map_df</span>(.,bind_rows) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>indic) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date=</span>lubridate<span class="op">::</span><span class="kw"><a href="http://lubridate.tidyverse.org/reference/parse_date_time.html">parse_date_time</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(year, trimester,<span class="dt">sep=</span><span class="st">'-'</span>), <span class="st">'%y%q'</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x=</span>date,<span class="dt">y=</span>ind), <span class="dt">color=</span><span class="st">'blue'</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>,<span class="fl">0.3</span>)) <span class="op">+</span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">'% TCP sobre ocupados'</span>)</code></pre></div>
<p><img src="eph_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
</div>
<div id="la-yapa-cálculo-de-pobreza" class="section level3">
<h3 class="hasAnchor">
<a href="#la-yapa-c%C3%A1lculo-de-pobreza" class="anchor"></a>La yapa: cálculo de pobreza:</h3>
<p>Un objetivo del paquete <code>eph</code>, es lograr automatizar el cálculo de pobreza e indigencia del INDEC para las bases trimestrales<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. El gran problema es que no existe información publicada fuera de los informes de prensa en formato pdf sobre los valores de las canastas básicas y alimentarias.</p>
<p>No obstante, hemos desarrollado dos funciones que, de encontrarse disponibles dichos datos, podrían calcular de forma automática los valores de pobreza e indigencia. Mostraremos un ejemplo de juguete con dos datasets de la CABA y sus respectivos valores de canastas.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bases &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(toybase_individual_2016_<span class="dv">03</span>,toybase_individual_2016_<span class="dv">04</span>)</code></pre></div>
<p>Existen dos funciones núcleo:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lineas &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_poverty_lines.html">get_poverty_lines</a></span>()
lineas <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>()
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   periodo               CBA   ICE   CBT</span>
<span class="co">#&gt;   &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 2016-04-01 00:00:00 1515.  2.42 3664.</span>
<span class="co">#&gt; 2 2016-05-01 00:00:00 1561.  2.45 3831.</span>
<span class="co">#&gt; 3 2016-06-01 00:00:00 1614.  2.44 3943.</span>
<span class="co">#&gt; 4 2016-07-01 00:00:00 1666.  2.42 4034.</span>
<span class="co">#&gt; 5 2016-08-01 00:00:00 1675.  2.41 4042.</span>
<span class="co">#&gt; 6 2016-09-01 00:00:00 1711.  2.39 4090.</span></code></pre></div>
<p>Esta función descarga los valores de las canastas alimentaria, básica (CBA y CBT) y la inversa del coeficiente de Engels… perdón, Engel (ICE) de <a href="https://www.indec.gob.ar/indec/web/Nivel4-Tema-4-43-149">la serie provista por INDEC</a>. Esta es la serie para GBA, y es la que publica regularmente INDEC.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lineas <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>ICE) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(canasta, valor, <span class="op">-</span>periodo) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x=</span>periodo, <span class="dt">y=</span>valor, <span class="dt">col=</span>canasta))</code></pre></div>
<p><img src="eph_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
<p>Para el calculo de la Pobreza e Indigence se utilizan canastas regionales, que sólo aparecen en los <a href="https://www.indec.gob.ar/uploads/informesdeprensa/eph_pobreza_01_19422F5FC20A.pdf">informes Técnicos</a>.</p>
<p>A modo de ejemplo, en la librería <code>eph</code> se encuentra la base <code>canastas_reg_example</code> con la información necesaria para realizar el cálculo</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">canastas_reg_example
<span class="co">#&gt; # A tibble: 12 x 5</span>
<span class="co">#&gt;    region    periodo   CBA   CBT codigo</span>
<span class="co">#&gt;    &lt;chr&gt;     &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Cuyo      2016.3  1509. 3872.     42</span>
<span class="co">#&gt;  2 Cuyo      2016.4  1570. 4030.     42</span>
<span class="co">#&gt;  3 GBA       2016.3  1684. 4053.      1</span>
<span class="co">#&gt;  4 GBA       2016.4  1756. 4232.      1</span>
<span class="co">#&gt;  5 Noreste   2016.3  1513. 3414.     41</span>
<span class="co">#&gt;  6 Noreste   2016.4  1568. 3539.     41</span>
<span class="co">#&gt;  7 Noroeste  2016.3  1472. 3292.     40</span>
<span class="co">#&gt;  8 Noroeste  2016.4  1525. 3412.     40</span>
<span class="co">#&gt;  9 Pampeana  2016.3  1676. 4034.     43</span>
<span class="co">#&gt; 10 Pampeana  2016.4  1746. 4209.     43</span>
<span class="co">#&gt; 11 Patagonia 2016.3  1735. 4742.     44</span>
<span class="co">#&gt; 12 Patagonia 2016.4  1813. 4963.     44</span></code></pre></div>
<p>A su vez, también se encuentra la tabla de <code>adulto_equivalente</code> que permite construir la cantidad de adultos equivalentes a nivel hogar, para multiplicar al mismo por la canasta regional correspondiente, a fin de definir la línea a nivel hogar.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">adulto_equivalente
<span class="co">#&gt;     CH04 CH06 adequi</span>
<span class="co">#&gt; 1      1   -1   0.35</span>
<span class="co">#&gt; 2      1    1   0.37</span>
<span class="co">#&gt; 3      1    2   0.46</span>
<span class="co">#&gt; 4      1    3   0.51</span>
<span class="co">#&gt; 5      1    4   0.55</span>
<span class="co">#&gt; 6      1    5   0.60</span>
<span class="co">#&gt; 7      1    6   0.64</span>
<span class="co">#&gt; 8      1    7   0.66</span>
<span class="co">#&gt; 9      1    8   0.68</span>
<span class="co">#&gt; 10     1    9   0.69</span>
<span class="co">#&gt; 11     2   -1   0.35</span>
<span class="co">#&gt; 12     2    1   0.37</span>
<span class="co">#&gt; 13     2    2   0.46</span>
<span class="co">#&gt; 14     2    3   0.51</span>
<span class="co">#&gt; 15     2    4   0.55</span>
<span class="co">#&gt; 16     2    5   0.60</span>
<span class="co">#&gt; 17     2    6   0.64</span>
<span class="co">#&gt; 18     2    7   0.66</span>
<span class="co">#&gt; 19     2    8   0.68</span>
<span class="co">#&gt; 20     2    9   0.69</span>
<span class="co">#&gt; 21     1   10   0.79</span>
<span class="co">#&gt; 22     1   11   0.82</span>
<span class="co">#&gt; 23     1   12   0.85</span>
<span class="co">#&gt; 24     1   13   0.90</span>
<span class="co">#&gt; 25     1   14   0.96</span>
<span class="co">#&gt; 26     1   15   1.00</span>
<span class="co">#&gt; 27     1   16   1.03</span>
<span class="co">#&gt; 28     1   17   1.04</span>
<span class="co">#&gt; 29     2   10   0.70</span>
<span class="co">#&gt; 30     2   11   0.72</span>
<span class="co">#&gt; 31     2   12   0.74</span>
<span class="co">#&gt; 32     2   13   0.76</span>
<span class="co">#&gt; 33     2   14   0.76</span>
<span class="co">#&gt; 34     2   15   0.77</span>
<span class="co">#&gt; 35     2   16   0.77</span>
<span class="co">#&gt; 36     2   17   0.77</span>
<span class="co">#&gt; 37     1   18   1.02</span>
<span class="co">#&gt; 38     1   19   1.02</span>
<span class="co">#&gt; 39     1   20   1.02</span>
<span class="co">#&gt; 40     1   21   1.02</span>
<span class="co">#&gt; 41     1   22   1.02</span>
<span class="co">#&gt; 42     1   23   1.02</span>
<span class="co">#&gt; 43     1   24   1.02</span>
<span class="co">#&gt; 44     1   25   1.02</span>
<span class="co">#&gt; 45     1   26   1.02</span>
<span class="co">#&gt; 46     1   27   1.02</span>
<span class="co">#&gt; 47     1   28   1.02</span>
<span class="co">#&gt; 48     1   29   1.02</span>
<span class="co">#&gt; 49     1   30   1.00</span>
<span class="co">#&gt; 50     1   31   1.00</span>
<span class="co">#&gt; 51     1   32   1.00</span>
<span class="co">#&gt; 52     1   33   1.00</span>
<span class="co">#&gt; 53     1   34   1.00</span>
<span class="co">#&gt; 54     1   35   1.00</span>
<span class="co">#&gt; 55     1   36   1.00</span>
<span class="co">#&gt; 56     1   37   1.00</span>
<span class="co">#&gt; 57     1   38   1.00</span>
<span class="co">#&gt; 58     1   39   1.00</span>
<span class="co">#&gt; 59     1   40   1.00</span>
<span class="co">#&gt; 60     1   41   1.00</span>
<span class="co">#&gt; 61     1   42   1.00</span>
<span class="co">#&gt; 62     1   43   1.00</span>
<span class="co">#&gt; 63     1   44   1.00</span>
<span class="co">#&gt; 64     1   45   1.00</span>
<span class="co">#&gt; 65     1   46   1.00</span>
<span class="co">#&gt; 66     1   47   1.00</span>
<span class="co">#&gt; 67     1   48   1.00</span>
<span class="co">#&gt; 68     1   49   1.00</span>
<span class="co">#&gt; 69     1   50   1.00</span>
<span class="co">#&gt; 70     1   51   1.00</span>
<span class="co">#&gt; 71     1   52   1.00</span>
<span class="co">#&gt; 72     1   53   1.00</span>
<span class="co">#&gt; 73     1   54   1.00</span>
<span class="co">#&gt; 74     1   55   1.00</span>
<span class="co">#&gt; 75     1   56   1.00</span>
<span class="co">#&gt; 76     1   57   1.00</span>
<span class="co">#&gt; 77     1   58   1.00</span>
<span class="co">#&gt; 78     1   59   1.00</span>
<span class="co">#&gt; 79     1   60   1.00</span>
<span class="co">#&gt; 80     1   61   0.83</span>
<span class="co">#&gt; 81     1   62   0.83</span>
<span class="co">#&gt; 82     1   63   0.83</span>
<span class="co">#&gt; 83     1   64   0.83</span>
<span class="co">#&gt; 84     1   65   0.83</span>
<span class="co">#&gt; 85     1   66   0.83</span>
<span class="co">#&gt; 86     1   67   0.83</span>
<span class="co">#&gt; 87     1   68   0.83</span>
<span class="co">#&gt; 88     1   69   0.83</span>
<span class="co">#&gt; 89     1   70   0.83</span>
<span class="co">#&gt; 90     1   71   0.83</span>
<span class="co">#&gt; 91     1   72   0.83</span>
<span class="co">#&gt; 92     1   73   0.83</span>
<span class="co">#&gt; 93     1   74   0.83</span>
<span class="co">#&gt; 94     1   75   0.83</span>
<span class="co">#&gt; 95     2   18   0.76</span>
<span class="co">#&gt; 96     2   19   0.76</span>
<span class="co">#&gt; 97     2   20   0.76</span>
<span class="co">#&gt; 98     2   21   0.76</span>
<span class="co">#&gt; 99     2   22   0.76</span>
<span class="co">#&gt; 100    2   23   0.76</span>
<span class="co">#&gt; 101    2   24   0.76</span>
<span class="co">#&gt; 102    2   25   0.76</span>
<span class="co">#&gt; 103    2   26   0.76</span>
<span class="co">#&gt; 104    2   27   0.76</span>
<span class="co">#&gt; 105    2   28   0.76</span>
<span class="co">#&gt; 106    2   29   0.76</span>
<span class="co">#&gt; 107    2   30   0.77</span>
<span class="co">#&gt; 108    2   31   0.77</span>
<span class="co">#&gt; 109    2   32   0.77</span>
<span class="co">#&gt; 110    2   33   0.77</span>
<span class="co">#&gt; 111    2   34   0.77</span>
<span class="co">#&gt; 112    2   35   0.77</span>
<span class="co">#&gt; 113    2   36   0.77</span>
<span class="co">#&gt; 114    2   37   0.77</span>
<span class="co">#&gt; 115    2   38   0.77</span>
<span class="co">#&gt; 116    2   39   0.77</span>
<span class="co">#&gt; 117    2   40   0.77</span>
<span class="co">#&gt; 118    2   41   0.77</span>
<span class="co">#&gt; 119    2   42   0.77</span>
<span class="co">#&gt; 120    2   43   0.77</span>
<span class="co">#&gt; 121    2   44   0.77</span>
<span class="co">#&gt; 122    2   45   0.77</span>
<span class="co">#&gt; 123    2   46   0.76</span>
<span class="co">#&gt; 124    2   47   0.76</span>
<span class="co">#&gt; 125    2   48   0.76</span>
<span class="co">#&gt; 126    2   49   0.76</span>
<span class="co">#&gt; 127    2   50   0.76</span>
<span class="co">#&gt; 128    2   51   0.76</span>
<span class="co">#&gt; 129    2   52   0.76</span>
<span class="co">#&gt; 130    2   53   0.76</span>
<span class="co">#&gt; 131    2   54   0.76</span>
<span class="co">#&gt; 132    2   55   0.76</span>
<span class="co">#&gt; 133    2   56   0.76</span>
<span class="co">#&gt; 134    2   57   0.76</span>
<span class="co">#&gt; 135    2   58   0.76</span>
<span class="co">#&gt; 136    2   59   0.76</span>
<span class="co">#&gt; 137    2   60   0.76</span>
<span class="co">#&gt; 138    2   61   0.67</span>
<span class="co">#&gt; 139    2   62   0.67</span>
<span class="co">#&gt; 140    2   63   0.67</span>
<span class="co">#&gt; 141    2   64   0.67</span>
<span class="co">#&gt; 142    2   65   0.67</span>
<span class="co">#&gt; 143    2   66   0.67</span>
<span class="co">#&gt; 144    2   67   0.67</span>
<span class="co">#&gt; 145    2   68   0.67</span>
<span class="co">#&gt; 146    2   69   0.67</span>
<span class="co">#&gt; 147    2   70   0.67</span>
<span class="co">#&gt; 148    2   71   0.67</span>
<span class="co">#&gt; 149    2   72   0.67</span>
<span class="co">#&gt; 150    2   73   0.67</span>
<span class="co">#&gt; 151    2   74   0.67</span>
<span class="co">#&gt; 152    2   75   0.67</span>
<span class="co">#&gt; 153    2   76   0.63</span>
<span class="co">#&gt; 154    2   77   0.63</span>
<span class="co">#&gt; 155    2   78   0.63</span>
<span class="co">#&gt; 156    2   79   0.63</span>
<span class="co">#&gt; 157    2   80   0.63</span>
<span class="co">#&gt; 158    2   81   0.63</span>
<span class="co">#&gt; 159    2   82   0.63</span>
<span class="co">#&gt; 160    2   83   0.63</span>
<span class="co">#&gt; 161    2   84   0.63</span>
<span class="co">#&gt; 162    2   85   0.63</span>
<span class="co">#&gt; 163    2   86   0.63</span>
<span class="co">#&gt; 164    2   87   0.63</span>
<span class="co">#&gt; 165    2   88   0.63</span>
<span class="co">#&gt; 166    2   89   0.63</span>
<span class="co">#&gt; 167    2   90   0.63</span>
<span class="co">#&gt; 168    2   91   0.63</span>
<span class="co">#&gt; 169    2   92   0.63</span>
<span class="co">#&gt; 170    2   93   0.63</span>
<span class="co">#&gt; 171    2   94   0.63</span>
<span class="co">#&gt; 172    2   95   0.63</span>
<span class="co">#&gt; 173    2   96   0.63</span>
<span class="co">#&gt; 174    2   97   0.63</span>
<span class="co">#&gt; 175    2   98   0.63</span>
<span class="co">#&gt; 176    2   99   0.63</span>
<span class="co">#&gt; 177    2  100   0.63</span>
<span class="co">#&gt; 178    2  101   0.63</span>
<span class="co">#&gt; 179    2  102   0.63</span>
<span class="co">#&gt; 180    2  103   0.63</span>
<span class="co">#&gt; 181    2  104   0.63</span>
<span class="co">#&gt; 182    2  105   0.63</span>
<span class="co">#&gt; 183    2  106   0.63</span>
<span class="co">#&gt; 184    2  107   0.63</span>
<span class="co">#&gt; 185    2  108   0.63</span>
<span class="co">#&gt; 186    2  109   0.63</span>
<span class="co">#&gt; 187    2  110   0.63</span>
<span class="co">#&gt; 188    1   76   0.74</span>
<span class="co">#&gt; 189    1   77   0.74</span>
<span class="co">#&gt; 190    1   78   0.74</span>
<span class="co">#&gt; 191    1   79   0.74</span>
<span class="co">#&gt; 192    1   80   0.74</span>
<span class="co">#&gt; 193    1   81   0.74</span>
<span class="co">#&gt; 194    1   82   0.74</span>
<span class="co">#&gt; 195    1   83   0.74</span>
<span class="co">#&gt; 196    1   84   0.74</span>
<span class="co">#&gt; 197    1   85   0.74</span>
<span class="co">#&gt; 198    1   86   0.74</span>
<span class="co">#&gt; 199    1   87   0.74</span>
<span class="co">#&gt; 200    1   88   0.74</span>
<span class="co">#&gt; 201    1   89   0.74</span>
<span class="co">#&gt; 202    1   90   0.74</span>
<span class="co">#&gt; 203    1   91   0.74</span>
<span class="co">#&gt; 204    1   92   0.74</span>
<span class="co">#&gt; 205    1   93   0.74</span>
<span class="co">#&gt; 206    1   94   0.74</span>
<span class="co">#&gt; 207    1   95   0.74</span>
<span class="co">#&gt; 208    1   96   0.74</span>
<span class="co">#&gt; 209    1   97   0.74</span>
<span class="co">#&gt; 210    1   98   0.74</span>
<span class="co">#&gt; 211    1   99   0.74</span>
<span class="co">#&gt; 212    1  100   0.74</span>
<span class="co">#&gt; 213    1  101   0.74</span>
<span class="co">#&gt; 214    1  102   0.74</span>
<span class="co">#&gt; 215    1  103   0.74</span>
<span class="co">#&gt; 216    1  104   0.74</span>
<span class="co">#&gt; 217    1  105   0.74</span>
<span class="co">#&gt; 218    1  106   0.74</span>
<span class="co">#&gt; 219    1  107   0.74</span>
<span class="co">#&gt; 220    1  108   0.74</span>
<span class="co">#&gt; 221    1  109   0.74</span>
<span class="co">#&gt; 222    1  110   0.74</span></code></pre></div>
<p>La función <code>calculate_poverty</code> calcula la pertenencia a situaciones de pobreza e indigencia a nivel de los individuos siguiendo la metodología de línea:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
bases &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(toybase_individual_2016_<span class="dv">03</span>,toybase_individual_2016_<span class="dv">04</span>)
base_pobreza &lt;-<span class="st"> </span><span class="kw"><a href="../reference/calculate_poverty.html">calculate_poverty</a></span>(<span class="dt">base =</span> bases, <span class="dt">basket =</span> canastas_reg_example,<span class="dt">print_summary=</span><span class="ot">TRUE</span>)
<span class="co">#&gt; # A tibble: 2 x 4</span>
<span class="co">#&gt; # Groups:   ANO4 [1]</span>
<span class="co">#&gt;    ANO4 TRIMESTRE Tasa_pobreza Tasa_indigencia</span>
<span class="co">#&gt;   &lt;int&gt;     &lt;int&gt;        &lt;dbl&gt;           &lt;dbl&gt;</span>
<span class="co">#&gt; 1  2016         3       0.0296          0.0136</span>
<span class="co">#&gt; 2  2016         4       0.0324          0.0122</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">base_pobreza <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(CODUSU,ITF,region,adequi_hogar,CBA_hogar,CBT_hogar,situacion) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">sample_n</span>(<span class="dv">10</span>)
<span class="co">#&gt; # A tibble: 10 x 7</span>
<span class="co">#&gt;    CODUSU            ITF region  adequi_hogar CBA_hogar CBT_hogar situacion</span>
<span class="co">#&gt;    &lt;chr&gt;           &lt;int&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;    </span>
<span class="co">#&gt;  1 TQRMNOQSTHKNRT~ 21000 GBA             1        1756.     4232. no_pobre </span>
<span class="co">#&gt;  2 TQRMNOPVQHMMLL~ 37000 GBA             1        1684.     4053. no_pobre </span>
<span class="co">#&gt;  3 TQRMNOSWSHMOLS~ 10800 Cuyo            1        1509.     3872. no_pobre </span>
<span class="co">#&gt;  4 TQRMNOSUTHJMKR~ 12000 Noroes~         1        1525.     3412. no_pobre </span>
<span class="co">#&gt;  5 TQRMNOTRYHKMLP~ 16900 Patago~         0.77     1396.     3821. no_pobre </span>
<span class="co">#&gt;  6 TQRMNOQRVHKMLN~     0 GBA             1.27     2139.     5148. NA       </span>
<span class="co">#&gt;  7 TQRMNOSPRHKKKM~ 40000 Cuyo            1.02     1539.     3950. no_pobre </span>
<span class="co">#&gt;  8 TQRMNOQXXHLNLU~ 18000 Cuyo            0.76     1147.     2943. no_pobre </span>
<span class="co">#&gt;  9 TQRMNOPRVHMLQS~     0 GBA             1        1756.     4232. NA       </span>
<span class="co">#&gt; 10 TQRMNOPVQHLMMO~ 60000 Pampea~         0.76     1327.     3199. no_pobre</span></code></pre></div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>El calculo oficial se realiza sobre bases semestrales no publicadas<a href="#fnref1">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#instalaci%C3%B3n">Instalación</a></li>
      <li><a href="#ejemplo-de-flujo-de-trabajo">Ejemplo de flujo de trabajo</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Diego Kozlowski, Pablo Tiscornia, Guido Weksler, Natsumi Shokida, German Rosati.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
